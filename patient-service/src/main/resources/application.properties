spring.application.name=patient-service

server.port=8082

spring.datasource.url= jdbc:postgresql://172.16.1.122:5432/medical_patient_db
spring.datasource.username=user1
spring.datasource.password=user1
spring.jpa.database=POSTGRESQL
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect


eureka.client.service-url.defaultZone= http://172.16.1.122:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
#eureka.instance.prefer-ip-address=true
#eureka.instance.ip-address=172.20.10.4

#Redis
spring.data.redis.host=localhost
spring.data.redis.database=0
spring.data.redis.password=user1
spring.data.redis.username=user1


# Kafka Configuration (Both Producer and Consumer)
spring.kafka.bootstrap-servers=172.16.1.122:9092

# Producer Configuration
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3

# Consumer Configuration
spring.kafka.consumer.group-id=patient-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.enable-auto-commit=true


# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=100MB
spring.servlet.multipart.file-size-threshold=2KB

# File Storage Configuration
app.file.upload.dir=./uploads
app.file.base-url=http://172.16.1.122:8082/api/files
app.file.encryption.key=3F4A7B2C8E6D9F1A5B8C2E7F9D4A6B3C

# File Validation Configuration
app.file.max-size=10485760
app.file.max-count=10
app.file.allowed-types=application/pdf,image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp

logging.level.root=info
logging.level.com.patientservice=debug
logging.level.org.springframework.patientservice=debug

# ====== CASE ASSIGNMENT SCHEDULER CONFIGURATION ======

# Enable/disable the case assignment expiration scheduler
case.assignment.scheduler-enabled=true

# Check interval for expired assignments (in seconds)
# Default: 300 seconds (5 minutes)
case.assignment.check-interval-seconds=300

# Timeout period for doctor to accept assignment (in hours)
# Default: 24 hours
# After this period, unaccepted assignments will expire
case.assignment.assignment-timeout-hours=24
# And below for critical and urgent cases
case.assignment.critical-assignment-timeout-hours=4

# Whether to allow reassignment to the same doctor who didn't respond
# Default: false
# If true: System can reassign expired cases to the same doctor (after cooldown)
# If false: System will exclude non-responsive doctors from reassignment
case.assignment.can-reassign-to-same-doctor=false

# Enable/disable reminder notification system
# Default: true
case.assignment.reminder-enabled=true

# Reminder times in hours from assignment (comma-separated)
# Default: 12,20,23
# This means reminders will be sent at:
#   - 12 hours after assignment (12 hours remaining)
#   - 20 hours after assignment (4 hours remaining)
#   - 23 hours after assignment (1 hour remaining)
case.assignment.reminder-hours-from-assignment=12,20,23

# Send admin notifications for expired assignments
# Default: true
case.assignment.notify-admin-on-expiration=true

# Maximum number of reassignment attempts for a single case
# Default: 3
# After this many expirations, case requires manual intervention
case.assignment.max-reassignment-attempts=3

# Cooldown period before reassigning to same doctor (in hours)
# Default: 24 hours (1 day)
# Only applies if can-reassign-to-same-doctor=true
case.assignment.reassignment-cooldown-hours=24

# Prioritize cases with multiple expirations
# Default: true
case.assignment.prioritize-multiple-expirations=true

# Grace period after expiration before triggering reassignment (in minutes)
# Default: 5 minutes
# Allows for clock differences and processing delays
case.assignment.expiration-grace-period-minutes=5

# ====== SPRING TASK SCHEDULING CONFIGURATION ======
# Configure thread pool for scheduled tasks
spring.task.scheduling.pool.size=5
spring.task.scheduling.thread-name-prefix=case-scheduler-
